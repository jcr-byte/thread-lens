# Database Migrations

This directory contains SQL migration files for database schema changes.

## Running Migrations

### Option 1: Supabase Dashboard
1. Go to your Supabase project dashboard
2. Navigate to SQL Editor
3. Copy and paste the contents of the migration file
4. Execute the SQL

### Option 2: Supabase CLI (if configured)
```bash
supabase db push
```

### Option 3: Direct SQL Execution
Run the SQL file directly against your Supabase database using your preferred SQL client.

## Migration Files

### 001_add_outfit_signature.sql
- **Purpose**: Adds `outfit_signature` column and index for duplicate outfit detection
- **Date**: 2025
- **Steps**:
  1. Adds `outfit_signature` TEXT column (nullable initially)
  2. Creates composite index on `(user_id, outfit_signature)`
  3. Backfills existing outfits with signatures
  4. Optional: Add NOT NULL constraint after verification

## Important Notes

- Always backup your database before running migrations
- Test migrations in a development/staging environment first
- Verify the backfill completed successfully before adding NOT NULL constraint
- The signature is generated by sorting clothing_item_ids and joining with commas

